# Download ArgoCD Manifests

1) Download manifest YAML from https://raw.githubusercontent.com/argoproj/argo-cd/${VERSION}/manifests/install.yaml

2) Copy & Paste content into `defaultBase.yaml` 

# Setup Argo CD CLI

1) Download Argo CD CLI & place in PATH

* Latest is v1.4.2 - https://github.com/argoproj/argo-cd/releases

* `$ curl -sSL -o /usr/local/bin/argocd https://github.com/argoproj/argo-cd/releases/download/v1.4.2/argocd-darwin-amd64` 

---

# Setup Argo CD in K8s

1) Create `argocd` namespace

`$ kubectl create namespace argocd`


2) Apply Argo CD manifests

`$ kubectl apply -n argocd -f /path-to-argocd-overlays`


3) - LOCAL - Expose Argo CD API Server

`$ kubectl port-forward svc/argocd-server -n argocd 8080:443`

4) Login via Argo CD CLI

4.1) Get initial autogenerated password

`$ kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o name | cut -d'/' -f 2`

4.2) Login with username `admin` and password retrieved above.

`$ argocd login localhost:8080`


4.3) Change password

`$ argocd account update-password`

5) Add Repo 

`$ argocd repo add https://code.bestbuy.com/stash/scm/ae/ml-platform.git --username YOUR_USERNAME --password YOUR_PWD`

---
## GKE
Grant account the ability to create new cluster roles

`$ kubectl create clusterrolebinding YOURNAME-cluster-admin-binding --clusterrole=cluster-admin --user=YOUREMAIL@bestbuy.com`
